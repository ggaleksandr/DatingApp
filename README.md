# DatingApp

## Установка приложения

В файле settings.py добавьте в ALLOWED_HOSTS IP-адрес сервера, на котором будет производиться развертывание проекта.

Создайте каталог по вашему выбору, например, `/ docker`. \
Внутри него создайте каталоги для данных приложения:
`mkdir -p {pg/init,pg/data,pg/dump}`

Возьмите `pg_init_user.sh`, поместите его в `/docker/pg/init`. \
Откройте его, замените значения `djangouser` и `django` на свои. Сохраните файл.

Возьмите дамп SQL `sql_backup_data.sql`, поместите его в `/docker/pg/dump`.

Запускать проект на сервере будем на 8000 порту. \
Откройте его при помощи команды: Откройте его при помощи команды:

`sudo ufw allow 8000`

Наконец, запустите приложение с помощью команды `docker-compose up -d`.

## Использование приложения
1. Модель участника создается через веб-интерфейс Django 
(http://127.0.0.1:8000/api/clients/create/)
либо post-запросом.

2. Авторизированный пользователь может ставить лайки другим пользователям.

Для этого необходимо выполнить запрос:

```
http://127.0.0.1:8000/api/clients/<LIKED_USER_ID>/match/
```
где ``LIKED_USER_ID`` - ID пользователя, который понравился авторизованному пользователю. \
В случае, если пользователь с ID равным ``LIKED_USER_ID`` тоже поставил лайк авторизованному пользователю, выводится сообщение ``Match!`` вместе со статусом отправки электронных писем. \
Обоим пользователям высылаются электронные письма с информацией о пользователе, с которым возникла взаимная симпатия.

Если симпатия невзаимна выводится сообщение ``No match!``.

4. Список участников выводится с помощью веб-интерфейса Django Rest Framework
(http://127.0.0.1:8000/api/list)

Для просмотра списка участников необходима авторизация. 
В случае, если пользователь не авторизован, происходит перенаправление на форму авторизации.
После успешной авторизации пользователь перенаправляется на страницу со списком пользователей.

Фильтр ``max_distance``позволяет выводить только тех пользователей, расстояние до которых меньше, чем указано в фильтре.

Фильтры

```
gender
first_name
last_name
```

позволяют фильтровать пользователей по полу, имени и фамилии.

Фильтр max_distance задается только query-параметром, остальные фильтры можно выбрать в веб-интерфейсе, либо аналогично установить query-параметром.
